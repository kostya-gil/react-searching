(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(t,e,s){t.exports=s(56)},34:function(t,e,s){},53:function(t,e,s){},54:function(t,e,s){},55:function(t,e,s){},56:function(t,e,s){"use strict";s.r(e);var a=s(0),o=s.n(a),n=s(6),r=s.n(n),c=s(5),l=s(3),p=s(23),i=s(12);const u="FETCH_POSTS",h="RESET",m={items:[],loading:!1,query:"",totalCount:-1};var d=Object(l.c)({posts:function(t=m,e){switch(e.type){case h:return Object(i.a)({},t,{items:[],loading:!1,query:"",totalCount:-1});case u:return Object(i.a)({},t,{items:t.items.concat(e.payload.posts),loading:e.payload.loading,query:e.payload.query,totalCount:e.payload.totalCount});default:return t}}});var y=Object(l.d)(d,{},Object(l.a)(p.a)),g=(s(34),s(7)),_=s(24),E=s.n(_);const f=(t,e=1)=>s=>{s({type:u,payload:{posts:[],loading:!0,query:t,totalCount:-1}}),E.a.get("https://api.github.com/search/repositories?q=".concat(t,"&page=").concat(e,"&per_page=10")).then(t=>t.data).then(e=>{s({type:u,payload:{posts:e.items,loading:!1,query:t,totalCount:parseInt(e.total_count,10)}})}).catch(t=>{console.log(t)})};s(53);var v=Object(c.b)(t=>({loading:t.posts.loading,query:t.posts.query}),{fetchPosts:f,reset:()=>t=>{t({type:h,payload:{}})}})(class extends a.Component{constructor(...t){super(...t),this.state={query:""},this.getAnswer=Object(g.debounce)(t=>{t!==this.props.query&&this.props.reset(),this.setState({query:t}),this.state.query&&this.props.fetchPosts(this.state.query)},500)}render(){const t=this.props.loading?"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u044e...":'<div style="visibility:hidden">text</div>';return o.a.createElement("div",{className:"search"},o.a.createElement("input",{type:"text",autoFocus:!0,className:"search__input",placeholder:"\u041f\u043e\u0438\u0441\u043a",onChange:t=>this.getAnswer(t.target.value)}),o.a.createElement("p",{className:"search__status",dangerouslySetInnerHTML:{__html:t}}))}});s(54);var b=class extends a.Component{render(){const t=this.props.post.full_name,e=this.props.post.html_url,s=this.props.post.stargazers_count,a=this.props.post.watchers_count,n=this.props.post.description;return o.a.createElement("div",{className:"post"},o.a.createElement("h3",{className:"post__title"},o.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},t)),o.a.createElement("p",{className:"post__text"},n),o.a.createElement("p",{className:"post__count-stars"},"\u0417\u0432\u0435\u0437\u0434",o.a.createElement("span",{className:"post__counter"},s)),o.a.createElement("p",{className:"post__count-subs"},"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u043e\u0432",o.a.createElement("span",{className:"post__counter"},a)))}};s(55);var q=Object(c.b)(t=>({posts:t.posts.items,query:t.posts.query,totalCount:t.posts.totalCount,loading:t.posts.loading}),{fetchPosts:f})(class extends a.Component{constructor(...t){super(...t),this.state={nextPage:1},this.infinityScroll=Object(g.debounce)(t=>{const e=t.firstElementChild;let s=t.offsetHeight,a=e.offsetHeight,o=t.scrollTop;a-s<=o&&!this.props.loading&&o>0&&(this.setState(({nextPage:t})=>({nextPage:t+1})),this.props.fetchPosts(this.props.query,this.state.nextPage))},500)}render(){const t=0===this.props.totalCount&&void 0!==this.props.query?"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e...":"",e=this.props.posts.map(t=>o.a.createElement(b,{post:t,key:t.id}));return o.a.createElement("div",{className:"result",onScroll:t=>this.infinityScroll(t.target)},o.a.createElement("div",null,e,o.a.createElement("p",{className:"search__status"},t)))}});var w=class extends a.Component{render(){return o.a.createElement(c.a,{store:y},o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"wrapper"},o.a.createElement("h1",null,"\u041f\u043e\u0438\u0441\u043a GitHub"),o.a.createElement(v,null),o.a.createElement(q,null))))}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.32780a35.chunk.js.map